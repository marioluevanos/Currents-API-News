parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"RdlE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.state=void 0;const t="localhost"===window.location.hostname,e=t?"http://localhost:5001/journalism-died/us-central1/api":"https://us-central1-journalism-died.cloudfunctions.net/api",o={IS_DEV:t,BASE_URL:e};exports.state=o;
},{}],"SYrZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchData=c,exports.fetchFilterOptions=i,exports.buildUrl=d;var e=require("./state.js");const t=document.documentElement,a=document.getElementById("news-results"),n=document.getElementById("keywords"),l=document.getElementById("select-language"),s=document.getElementById("select-region"),r=document.getElementById("select-categories"),o=document.getElementById("select-date-start"),u=document.getElementById("select-date-end");async function c({latestNews:e,pageNumber:a}={}){let n=d({latestNews:e,pageNumber:a});t.classList.add("is-loading");try{const e=await fetch(n);e.ok||m(e);const a=await e.json();return t.classList.remove("is-loading"),{data:a,url:n}}catch(l){console.error(l)}}async function i(t=""){if(window.localStorage){const e=localStorage.getItem(t);if(e)return JSON.parse(e)}const a=`${e.state.BASE_URL}/filters?name=${t}`;try{const e=await fetch(a),l=(await e.json())[t];return localStorage.setItem(t,JSON.stringify(l)),l}catch(n){console.error(n)}}function d({latestNews:t,pageNumber:a}={}){const c=""!==n.value,i="any"!==l.value,d="any"!==s.value,m="any"!==r.value,y=""!==o.value,v=""!==u.value,f=!(c||i||d||m||y||v),w=""===n.value&&i&&!m;let $=`${e.state.BASE_URL}/search?`;return c&&($+=`keywords=${n.value}&`),i&&($+=`language=${l.value}&`),d&&($+=`country=${s.value}&`),m&&($+=`category=${r.value}&`),y&&($+=`start_date=${o.value}&`),v&&($+=`end_date=${u.value}&`),(t||w||f)&&($=`${e.state.BASE_URL}/latest?`,i&&($+=`language=${l.value}&`),t&&g()),a&&($+=`page_number=${a}&`),$.replace(/\&$/g,"")}function g(){r.value="any",n.value="",s.value="any",o.value="",u.value=""}function m(e){alert(JSON.stringify(e)),a.innerHTML='<br><h2 style="text-align: center">Something went wrong with the server.</h2>'}
},{"./state.js":"RdlE"}],"i0KX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initFilters=a,exports.closeAllFilters=u,exports.updateTrayText=f,exports.loadStoredFilter=d;var e=require("./api.js"),t=require("./state.js");const s=document.getElementById("news-results"),n=document.querySelector(".news-filters"),i=document.getElementById("filter-button"),r=document.querySelectorAll(".filter-tray-button"),o=document.querySelectorAll(".filter-group");async function a(){await g(),i.addEventListener("click",c),r.forEach(e=>e.addEventListener("click",l)),s.addEventListener("click",u)}function c(){const e=getComputedStyle(document.documentElement).getPropertyValue("--filter-width");n.classList.toggle("active");const t=n.classList.contains("active")?"240px":e;document.documentElement.style.setProperty("--ui-filters-width",t)}function l(e){const t=e.target.dataset.name,{target:n}=e;r.forEach(e=>{e.dataset.name!==t&&e.classList.remove("active")}),n.classList.toggle("active"),n.classList.contains("active")?s.classList.add("is-active-filters"):s.classList.remove("is-active-filters"),o.forEach(e=>{e.dataset.name!==t?e.classList.remove("active"):e.classList.toggle("active")})}function u(){o.forEach(e=>e.classList.remove("active")),r.forEach(e=>e.classList.remove("active")),s.classList.remove("is-active-filters")}function f({language:e,region:t}){const[s,n]=Array.from(r).map(e=>e.querySelector(".tray-text"));if(e&&s){const t=Array.from(e.children).find(e=>e.selected).innerText;s.innerText="Any"===t?"Language":t}if(t&&n){const e=Array.from(t.children).find(e=>e.selected).innerText;n.innerText="Any"===e?"Region":e}}function d(e,t){const s=localStorage.getItem(e);s&&(t.value=s,f({[e]:t}))}async function g(){const s=await Promise.all([(0,e.fetchFilterOptions)("categories"),(0,e.fetchFilterOptions)("languages"),(0,e.fetchFilterOptions)("regions")]),[n,i,r]=s;t.state.categories=n,t.state.languages=i,t.state.regions=r,m("#select-categories",n),m("#select-language",i),m("#select-region",r)}function m(e,t){if(!t||!e)return;const s=document.querySelector(e);if(t instanceof Array)v(t).forEach(e=>{s.innerHTML+=`<option value=${e}>${p(e)}</option>`});else{Object.entries(t).forEach(([e,t])=>{s.innerHTML+=`<option value=${t}>${p(e)}</option>`})}}function p(e=""){return e.split(" ").map(e=>e.replace(/\w{1}/,e=>e.toUpperCase())).join(" ")}function v(e){return e.sort((e,t)=>t.toUpperCase()<e.toUpperCase()?1:-1)}
},{"./api.js":"SYrZ","./state.js":"RdlE"}],"N4XV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNewsCard=n;var e=require("./category.js"),t=require("./state.js");function n(e){const t=f("div"),n=r(e);if("None"!==e.image){const n=s(e);t.appendChild(n),t.classList.add("has-image")}return t.classList.add("news"),t.appendChild(n),L(t),t}function s({url:e,image:t,title:n}){const s=f("figure"),a=i({url:e}),r=f("img");return s.classList.add("news-image"),r.setAttribute("src",t),r.setAttribute("alt",n),r.setAttribute("loading","lazy"),r.setAttribute("width","1200"),r.setAttribute("height","675"),a.appendChild(r),s.appendChild(a),s}function i({url:e,title:t=""}){const n=f("a");return n.classList.add("news-link"),n.setAttribute("href",e),n.setAttribute("target","_blank"),n.setAttribute("rel","noopener"),n.innerHTML=t,n}function a({author:e,url:t}){const n=f("div"),s=i({url:t}),a=o();if(h(e)){const t=f("div"),s=c(e);t.innerHTML=`By ${s}`,t.classList.add("news-author"),n.appendChild(t)}return s.innerHTML=`Full Story ${a}`,s.classList.add("underline"),n.classList.add("news-footer"),n.appendChild(s),n}function r({image:e,author:t,url:n,title:s,description:i,category:r,published:o}){const c=f("div"),p=d(r,o),g=l({title:s,url:n}),m=f("p"),w=a({author:t,url:n}),L=u(i);if(m.innerHTML=h(L),c.classList.toggle("no-desc",!L),c.classList.add("news-text"),m.classList.add("news-desc"),"None"!==e)c.appendChild(p),c.appendChild(g),c.appendChild(m),c.appendChild(w);else{const e=f("div"),t=f("div");e.classList.add("news-headline"),t.classList.add("news-details"),e.appendChild(p),e.appendChild(g),t.appendChild(m),t.appendChild(w),c.appendChild(e),c.appendChild(t)}return c}function d(n,s){const i=f("div"),a=f("div"),r=f("span"),d=f("div"),l=w(new Date(s).toISOString());i.classList.add("news-meta"),a.classList.add("news-categories"),r.classList.add("separator"),d.classList.add("news-pubdate"),r.innerText="•",d.innerText=l;const o=n.filter(e=>{if(t.state.categories.includes(e))return e}).filter((e,t)=>t<=1&&e);return o.map(t=>{const n=f("a");return n.innerText=`${t}`,n.setAttribute("data-category",t),n.setAttribute("href","#"),n.classList.add("news-category","underline"),n.addEventListener("click",e.onCategoryTagClick),n}).forEach((e,t)=>{a.appendChild(e),o.length-1===t||(a.innerHTML+='<span class="separator">•</span>')}),i.appendChild(a),i.appendChild(r),i.appendChild(d),i}function l({title:e,url:t}){const n=f("h2"),s=i({title:e,url:t});return s.classList.add("underline"),n.classList.add("news-title"),n.appendChild(s),n}function o(){return'\n        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n            <line x1="14.5" y1="1.5" x2="1.5" y2="14.5"></line>\n            <polyline points="7.5,1.5 14.5,1.5 14.5,8.5 "></polyline>\n        </svg>\n    '}function c(e){const t=document.createElement("span");t.innerHTML=e;const n=u(p(t.innerText)).split(",").filter(Boolean).map((e,t,n)=>`${e}${n.length>1&&t>=0&&t<n.length-1?",<br>":""}`).slice(0,3).join("").trim();return t.remove(),n}function u(e=""){return e.replace(/(<([^>]+)>)|(\\n)/gim,"")}function p(e=""){if(e.match(/(^\[{)|(}\]$)/g)){const t=JSON.parse(e)[0];return t?t.name:""}return e}function h(e=""){return e.replace(/@?https?:\/\/|(www.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&\/\/=]*)?/gim,"")}function f(e){return document.createElement(e)}const g={prefix:"",suffix:" ago",seconds:"less than a minute",minute:"a minute",minutes:"%d minutes",hour:"an hour",hours:"%d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years"};function m(e,t){return g[e]&&g[e].replace(/%d/i,Math.abs(Math.round(t)))}function w(e){if(!e)return;e=(e=(e=(e=e.replace(/\.\d+/,"")).replace(/-/,"/").replace(/-/,"/")).replace(/T/," ").replace(/Z/," UTC")).replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),e=new Date(1e3*e||e);const t=.001*((new Date).getTime()-e)>>0,n=t/60,s=n/60,i=s/24,a=i/365;return g.prefix+(t<45&&m("seconds",t)||t<90&&m("minute",1)||n<45&&m("minutes",n)||n<90&&m("hour",1)||s<24&&m("hours",s)||s<42&&m("day",1)||i<30&&m("days",i)||i<45&&m("month",1)||i<365&&m("months",i/30)||a<1.5&&m("year",1)||m("years",a))+g.suffix}function L(e){new IntersectionObserver(e=>{e.forEach(e=>{const t=e.intersectionRatio,{top:n}=e.boundingClientRect,s=0===t&&n>=0;t>.5&&n>=0?e.target.classList.add("is-visible"):s&&e.target.classList.remove("is-visible")})},{rootMargin:"0px",threshold:[0,.5,1]}).observe(e)}
},{"./category.js":"m0Fr","./state.js":"RdlE"}],"fZBP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.updatePagination=d;var e=require("./update.js"),t=require("./api.js");const a=document.getElementById("news-prev"),n=document.getElementById("news-next"),r=document.getElementById("news-current-page");function d(e,t){r.innerText=e.page;const d=e.page-1;d>0?(a.setAttribute("data-page",d),a.removeAttribute("disabled")):a.setAttribute("disabled",!0);const s=e.page+1;n.setAttribute("data-page",s)}async function s(a){const{page:n}=a.target.dataset,r=await(0,t.fetchData)({pageNumber:n});(0,e.updatePageUI)(r.data,r.url)}n.addEventListener("click",s),a.addEventListener("click",s);
},{"./update.js":"CWBY","./api.js":"SYrZ"}],"CWBY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.updatePageUI=i;var e=require("./newsCard.js"),t=require("./pagination.js"),n=require("./api.js");const a=document.getElementById("news-results");let r={};function i(e={news:[]},t=""){r={data:e,url:t},a.style.opacity=0,a.addEventListener("transitionend",o)}function s(){if(0===r.data.news.length)return d();a.innerHTML="",r.data.news.map(t=>(0,e.createNewsCard)(t)).forEach(e=>a.appendChild(e)),(0,t.updatePagination)(r.data,r.url),a.removeAttribute("style")}function o(e){"opacity"===e.propertyName&&(a.removeEventListener("transitionend",o),window.scrollTo(0,0),s())}function d(){const e=document.createElement("a");e.innerText="Go Back",e.href="#",e.addEventListener("click",async e=>{e.preventDefault();const{data:t,url:a}=await(0,n.fetchData)({latestNews:!0});i(t,a)}),a.innerHTML='<h2 style="margin-bottom: 30px;">Nothing found.</h2>',a.appendChild(e),a.style.cssText="text-align: center; padding: 30px; opacity: 1;"}
},{"./newsCard.js":"N4XV","./pagination.js":"fZBP","./api.js":"SYrZ"}],"m0Fr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initCategoryChange=o,exports.onCategoryTagClick=n;var e=require("./update.js"),t=require("./api.js"),a=require("./filters.js");const r=document.getElementById("select-categories");function o(){(0,a.loadStoredFilter)("category",r),r.addEventListener("change",c)}async function c(a){const{data:r,url:o}=await(0,t.fetchData)();(0,e.updatePageUI)(r,o),localStorage.setItem("category",a.target.value)}async function n(a){a.preventDefault();const{category:o}=a.target.dataset,{data:c,url:n}=await(0,t.fetchData)();r.value=o,(0,e.updatePageUI)(c,n),localStorage.setItem("category",o)}
},{"./update.js":"CWBY","./api.js":"SYrZ","./filters.js":"i0KX"}],"zjSK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initLanguageChange=r;var e=require("./update.js"),t=require("./api.js"),a=require("./filters.js");const n=document.getElementById("select-language");function r(){n.addEventListener("change",u),(0,a.loadStoredFilter)("language",n)}async function u(n){const{data:r,url:u}=await(0,t.fetchData)(),l=n.target.value;(0,e.updatePageUI)(r,u),(0,a.updateTrayText)({language:n.target}),(0,a.closeAllFilters)(),localStorage.setItem("language",l),"any"!==l&&document.documentElement.setAttribute("lang",l)}
},{"./update.js":"CWBY","./api.js":"SYrZ","./filters.js":"i0KX"}],"Xtr2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initRegionChange=i;var e=require("./update.js"),t=require("./api.js"),r=require("./filters.js");const a=document.getElementById("select-region");function i(){a.addEventListener("change",n),(0,r.loadStoredFilter)("region",a)}async function n(a){const{data:i,url:n}=await(0,t.fetchData)();(0,e.updatePageUI)(i,n),(0,r.updateTrayText)({region:a.target}),(0,r.closeAllFilters)(),localStorage.setItem("region",a.target.value)}
},{"./update.js":"CWBY","./api.js":"SYrZ","./filters.js":"i0KX"}],"PS72":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initDateChange=s;var e=require("./update.js"),t=require("./api.js"),a=require("./filters.js");const n=document.getElementById("select-date-start"),d=document.getElementById("select-date-end"),r=document.getElementById("filter-date-apply");let l,i;function s(){n.addEventListener("change",c.bind(null,"startDate")),d.addEventListener("change",c.bind(null,"endDate")),r.addEventListener("click",u)}function c(e,t){"startDate"===e&&(l=t.target.value),"endDate"===e&&(i=t.target.value)}async function u(){if(l&&i){const{data:n,url:d}=await(0,t.fetchData)();(0,e.updatePageUI)(n,d),(0,a.closeAllFilters)()}}
},{"./update.js":"CWBY","./api.js":"SYrZ","./filters.js":"i0KX"}],"Quf1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initSearch=i;var e=require("./api.js"),t=require("./update.js");const n=document.querySelector("h1"),o=document.getElementById("keywords"),s=document.getElementById("news-form"),c=document.getElementById("search-button");function i(){o.addEventListener("focus",d),o.addEventListener("blur",r),c.addEventListener("click",a),n.addEventListener("click",u),a()}async function a(n){n&&n.preventDefault();const{data:o,url:s}=await(0,e.fetchData)();(0,t.updatePageUI)(o,s)}function d(){s.classList.add("is-focused")}function r(){s.classList.remove("is-focused")}function u(){const n=window.scrollY/2,o=window.scrollY>n?window.innerHeight:0,s=1e3*((window.scrollY+o)/document.body.clientHeight);window.scrollTo({top:0,behavior:"smooth"}),setTimeout(async()=>{const{data:n,url:o}=await(0,e.fetchData)({latestNews:!0});(0,t.updatePageUI)(n,o)},s)}
},{"./api.js":"SYrZ","./update.js":"CWBY"}],"PM2g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initTheme=c;const e=document.getElementById("select-theme"),t="is-dark-mode";function c(){e.addEventListener("change",n),s()}function n(e){const{checked:c}=e.target;o(c),localStorage.setItem(t,c)}function o(e){document.documentElement.classList.toggle(t,e)}function s(){const c=JSON.parse(localStorage.getItem(t));o(c),e.checked=c}
},{}],"g2Hq":[function(require,module,exports) {
"use strict";var e=require("./filters.js"),i=require("./category.js"),r=require("./language.js"),a=require("./region.js"),n=require("./date.js"),t=require("./search.js"),s=require("./theme.js");async function g(){await(0,e.initFilters)(),(0,i.initCategoryChange)(),(0,r.initLanguageChange)(),(0,a.initRegionChange)(),(0,n.initDateChange)(),(0,t.initSearch)(),(0,s.initTheme)()}g();
},{"./filters.js":"i0KX","./category.js":"m0Fr","./language.js":"zjSK","./region.js":"Xtr2","./date.js":"PS72","./search.js":"Quf1","./theme.js":"PM2g"}]},{},["g2Hq"], null)
//# sourceMappingURL=/scripts.5b6cfb05.js.map