{"version":3,"sources":["scripts/state.js","scripts/api.js","scripts/filters.js","scripts/newsCard.js","scripts/pagination.js","scripts/update.js","scripts/category.js","scripts/language.js","scripts/region.js","scripts/date.js","scripts/search.js","scripts/theme.js","scripts/index.js"],"names":["IS_DEV","window","location","hostname","BASE_URL","state","htmlEl","document","documentElement","newsResults","getElementById","keywordsEl","languageEl","regionEl","categoriesEl","startDateEl","endDateEl","fetchData","latestNews","pageNumber","url","buildUrl","classList","add","response","fetch","ok","postErrorMessage","data","json","remove","error","console","fetchFilterOptions","name","localStorage","storedData","getItem","JSON","parse","dropDownType","setItem","stringify","isKeyword","value","isLanguage","isRegion","isCategory","isStartDate","isEndDate","isAllBlank","isDefault","searchUrl","resetSearchValues","replace","alert","innerHTML","newsFilters","querySelector","filterButton","filterTrayButtons","querySelectorAll","filterGroups","initFilters","loadFilters","addEventListener","toggleAsideFilters","forEach","button","onTrayButtonClick","closeAllFilters","closedValue","getComputedStyle","getPropertyValue","toggle","asideWidth","contains","style","setProperty","event","activeName","target","dataset","group","updateTrayText","language","region","languageTrayText","regionTrayText","Array","from","map","languageText","children","find","option","selected","innerText","regionText","loadStoredFilter","keyName","el","storedLang","results","Promise","all","categories","languages","regions","appendFilterOptions","selector","list","sortAlphabetically","item","toTitleCase","Object","entries","key","text","split","word","match","toUpperCase","join","sort","a","b","createNewsCard","news","create","newsText","createNewsText","hasImage","image","newsImage","createNewsImage","appendChild","animateIntoView","title","newsLink","createNewsLink","newsPicture","setAttribute","createNewsFooter","author","newsFooter","icon","createIconExternal","removeURLs","newsAuthor","authors","cleanUpAuthors","description","category","published","newsMeta","createNewsMeta","newsTitle","createNewsTitle","newsDesc","descText","removeHTMLTags","newsHeadline","newsDetails","categoriesList","newsCategory","separator","newsPubDate","pubDate","timeAgo","Date","toISOString","filteredCat","filter","catText","includes","idx","onCategoryTagClick","length","temp","createElement","cleanedAuthor","parseJSON","Boolean","src","slice","trim","html","j","tag","timeTemplates","prefix","suffix","seconds","minute","minutes","hour","hours","day","days","month","months","year","years","timeTemplate","t","n","Math","abs","round","time","now","getTime","IntersectionObserver","entry","ratio","intersectionRatio","top","boundingClientRect","shouldHide","rootMargin","threshold","observe","prev","next","current","updatePagination","page","prevPage","removeAttribute","nextPage","paginatePage","store","updatePageUI","opacity","onTransitionEnd","appendData","searchNotFound","card","propertyName","removeEventListener","scrollTo","goBack","href","e","preventDefault","cssText","initCategoryChange","onChange","initLanguageChange","lang","regionsEl","initRegionChange","startDate","endDate","apply","start","end","initDateChange","bind","onApply","type","keywords","searchForm","searchButton","initSearch","onSearchFocus","onSearchBlur","onSearchClick","onTitleClick","half","scrollY","diff","innerHeight","timeout","body","clientHeight","behavior","setTimeout","themeCheckbox","themeClassName","initTheme","loadTheme","checked","toggleTheme","bool","isDark","startApp"],"mappings":"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","file":"scripts.5b6cfb05.js","sourceRoot":"../src","sourcesContent":["const IS_DEV = window.location.hostname === 'localhost';\nconst BASE_URL = IS_DEV ? 'http://localhost:5001/journalism-died/us-central1/api' : 'https://us-central1-journalism-died.cloudfunctions.net/api';\n\nexport const state = {\n    IS_DEV,\n    BASE_URL\n};","import { state } from './state.js';\n\nconst htmlEl = document.documentElement;\nconst newsResults = document.getElementById('news-results');\nconst keywordsEl = document.getElementById('keywords');\nconst languageEl = document.getElementById('select-language');\nconst regionEl = document.getElementById('select-region');\nconst categoriesEl = document.getElementById('select-categories');\nconst startDateEl = document.getElementById('select-date-start');\nconst endDateEl = document.getElementById('select-date-end');\n\n/**\n * @param {Boolean} latestNews If true, fetch the latest news.\n * @return {Object} The data and the url searched\n */\nexport async function fetchData ({ latestNews, pageNumber } = {}) {\n\n    let url = buildUrl({ latestNews, pageNumber });\n\n    // Add loading class\n    htmlEl.classList.add('is-loading');\n\n    // if(state.IS_DEV) {\n    //     const storedData = localStorage.getItem(url);\n    //     if(storedData) {\n            \n    //         // Remove the loading screen\n    //         htmlEl.classList.remove('is-loading');\n\n    //         return {\n    //             data: JSON.parse(storedData),\n    //             url\n    //         };\n    //     }\n    // }\n\n    try {\n        const response = await fetch(url);\n        \n        if(!response.ok) postErrorMessage(response);\n        \n        const data = await response.json();\n        \n        // if(state.IS_DEV) localStorage.setItem(url, JSON.stringify(data));\n        \n        // Remove the loading class\n        htmlEl.classList.remove('is-loading');\n\n        return { data, url };\n\n    } catch(error) {\n        console.error(error);\n    }\n}\n\n/**\n * A generalized fetch function to get DropDown menu data\n * @param {String} name The name of the drop down to fetch\n * @returns {Array | Object} The dropdown values\n */\nexport async function fetchFilterOptions (name = '') {\n\n    // In case third party cookies or whatever is denied by the user\n    if (window.localStorage) {\n        const storedData = localStorage.getItem(name);\n        if(storedData) {\n            return JSON.parse(storedData);\n        }\n    }\n\n    const url = `${ state.BASE_URL }/filters?name=${ name }`;\n    try {\n        const response = await fetch(url);\n        const data = await response.json();\n        const dropDownType = data[name];\n        localStorage.setItem(name, JSON.stringify(dropDownType));\n        return dropDownType;\n    } catch(error) {\n        console.error(error);\n    }\n}\n\n/**\n * @param {Boolean} latestNews Explicitly get latest news\n * @param {String} pageNumber Add a page-number to the url\n * @return {String} The url to fetch\n */\nexport function buildUrl ({ latestNews, pageNumber } = {}) {\n\n    // Check if the inputs have any user value\n    const isKeyword = keywordsEl.value !== '';\n    const isLanguage = languageEl.value !== 'any';\n    const isRegion = regionEl.value !== 'any';\n    const isCategory = categoriesEl.value !== 'any';\n    const isStartDate = startDateEl.value !== '';\n    const isEndDate = endDateEl.value !== '';\n    const isAllBlank = !isKeyword && !isLanguage && !isRegion && !isCategory && !isStartDate && !isEndDate;\n    const isDefault = keywordsEl.value === '' && isLanguage && !isCategory;\n\n    // Contruct the base url\n    let searchUrl = `${ state.BASE_URL }/search?`;\n\n    if(isKeyword) {\n        searchUrl += `keywords=${ keywordsEl.value }&`;\n    }\n    if(isLanguage) {\n        searchUrl += `language=${ languageEl.value }&`;\n    }\n    if(isRegion) {\n        searchUrl += `country=${ regionEl.value }&`;\n    }\n    if(isCategory) {\n        searchUrl += `category=${ categoriesEl.value }&`;\n    }\n    if(isStartDate) {\n        searchUrl += `start_date=${ startDateEl.value }&`;\n    }\n    if(isEndDate) {\n        searchUrl += `end_date=${ endDateEl.value }&`;\n    }\n    if(latestNews || isDefault || isAllBlank) {\n        \n        // If they are all blank, use default search string\n        searchUrl = `${ state.BASE_URL }/latest?`;\n\n        if(isLanguage) {\n            searchUrl += `language=${ languageEl.value }&`;\n        }\n\n        // Reset to latest news\n        if (latestNews) {\n            resetSearchValues();\n        }\n    }\n    if (pageNumber) {\n        searchUrl += `page_number=${ pageNumber }&`\n    }\n\n    return searchUrl.replace(/\\&$/g, '');\n}\n\n/**\n * Resets everything except the language filter, since language is an accepted param in latest-news\n */\nfunction resetSearchValues() {\n    categoriesEl.value = 'any';\n    keywordsEl.value = '';\n    regionEl.value = 'any';\n    startDateEl.value = '';\n    endDateEl.value = '';\n}\n\nfunction postErrorMessage(response) {\n    alert(JSON.stringify(response))\n    newsResults.innerHTML = '<br><h2 style=\"text-align: center\">Something went wrong with the server.</h2>'\n}","import { fetchFilterOptions } from './api.js';\nimport { state } from './state.js';\n\n// Cache Elements\nconst newsResults = document.getElementById('news-results');\nconst newsFilters = document.querySelector('.news-filters');\nconst filterButton = document.getElementById('filter-button');\nconst filterTrayButtons = document.querySelectorAll('.filter-tray-button');\nconst filterGroups = document.querySelectorAll('.filter-group');\n\n/**\n * Initialize the search and add search events\n */\nexport async function initFilters () {\n    await loadFilters();\n    filterButton.addEventListener('click', toggleAsideFilters);\n    filterTrayButtons.forEach(button => button.addEventListener('click', onTrayButtonClick));\n    newsResults.addEventListener('click', closeAllFilters);\n}\n\n/**\n * Toggles the aside filters, open and closes\n */\nfunction toggleAsideFilters() {\n    const closedValue = getComputedStyle(document.documentElement).getPropertyValue('--filter-width');\n    const openValue = '240px';\n    \n    // Toggle the class first\n    newsFilters.classList.toggle('active');\n\n    // Check if the filters aside should be open or closed\n    const asideWidth = newsFilters.classList.contains('active') ? openValue : closedValue;\n\n    // Then assign the value to the CSS variable\n    document.documentElement.style.setProperty('--ui-filters-width', asideWidth);\n}\n\n/**\n * Selects the active tray element and toggle the active class\n */\nfunction onTrayButtonClick(event) {\n    const activeName = event.target.dataset.name;\n    const { target } = event;    \n    filterTrayButtons.forEach(button => {\n        if(button.dataset.name !== activeName) {\n            button.classList.remove('active');\n        }\n    });\n\n    target.classList.toggle('active');\n    if (target.classList.contains('active')) {\n        newsResults.classList.add('is-active-filters');\n    } else {\n        newsResults.classList.remove('is-active-filters');\n    }\n\n    filterGroups.forEach(group => {\n        const groupName = group.dataset.name;\n        if(groupName !== activeName) {\n            group.classList.remove('active');\n        } else {\n            group.classList.toggle('active'); \n        }\n    });\n}\n\n/**\n * Removes the active classes to the filter related elements\n */\nexport function closeAllFilters () {\n    filterGroups.forEach(group => group.classList.remove('active'));\n    filterTrayButtons.forEach(button => button.classList.remove('active'));\n    newsResults.classList.remove('is-active-filters');\n}\n\n/**\n * Updates the tray text on a mobile device view\n * @param {HTMLSelectElement} language\n * @param {HTMLSelectElement} region\n */\nexport function updateTrayText({ language, region }) {\n    const [\n        languageTrayText,\n        regionTrayText\n    ] = Array.from(filterTrayButtons).map(button => button.querySelector('.tray-text'));\n    \n    if(language && languageTrayText) {\n        const languageText = Array.from(language.children).find(option => option.selected).innerText;\n        languageTrayText.innerText = languageText === 'Any' ? 'Language' : languageText;\n    }\n\n    if(region && regionTrayText) {\n        const regionText = Array.from(region.children).find(option => option.selected).innerText;\n        regionTrayText.innerText = regionText === 'Any' ? 'Region' : regionText;\n    }\n}\n\n/**\n * Load once and set previous filter preference\n * @param {String} keyName\n * @param {HTMLSelectElement} el\n */\nexport function loadStoredFilter(keyName, el) {\n    const storedLang = localStorage.getItem(keyName);\n    if(storedLang) {\n        el.value = storedLang;\n        updateTrayText({ [keyName]: el });\n    }\n}\n\n/**\n * Loads the category, language and regions filters from the API\n */\nasync function loadFilters() {\n    // Promise.all takes in an array of Promises, that run in parallel\n    // It returns the results when all 3 process are completed\n    const results = await Promise.all([\n        fetchFilterOptions('categories'),\n        fetchFilterOptions('languages'),\n        fetchFilterOptions('regions'),\n    ]);\n\n    // Destructure the array, in the same order they were called above\n    // So, first position would be the categories, etc.\n    const [\n        categories,\n        languages,\n        regions\n    ] = results;\n\n    state.categories = categories;\n    state.languages = languages;\n    state.regions = regions;\n\n    // Now that we have data for our DropDowns, \n    // we can use the same function to append to each dropdown <select> element\n    appendFilterOptions(\"#select-categories\", categories);\n    appendFilterOptions(\"#select-language\", languages);\n    appendFilterOptions(\"#select-region\", regions);\n}\n\n/**\n * Loop through a list, then create and append an <option> element to it's selector\n * @param {String} selector CSS Selector\n * @param {Array | Object} list A list to interate and create an <option> element\n */\nfunction appendFilterOptions (selector, list) {\n\n    if(!list || !selector) return;\n\n    const el = document.querySelector(selector);\n    // Check if the list is an Array (without named keys)\n    if(list instanceof Array) {\n        sortAlphabetically(list).forEach((item) => {\n            el.innerHTML += `<option value=${ item }>${ toTitleCase(item) }</option>`;\n        });\n    } else {\n        // If not an Array, then it's an Object with key, value pairs.\n        // Create an Array from the object, \n        // with position zero[0] as key and position one[1] as value\n        const entries = Object.entries(list);\n        // Destructure the params within the arguments\n        entries.forEach(([key, value]) => {\n            el.innerHTML += `<option value=${ value }>${ toTitleCase(key) }</option>`;\n        });\n    }\n}\n\n/**\n * @param {String} text Some text content\n * @return {String} A text string that is title-cased ex: \"Title Cased Example\"\n */\nfunction toTitleCase (text = '') {\n    return text\n        // make array of words\n        .split(' ')\n        // transform each first letter of word\n        .map(word => word.replace(/\\w{1}/, match => match.toUpperCase()))\n        // join array words with space into string\n        .join(' ')\n}\n\nfunction sortAlphabetically (list) {\n    return list.sort((a, b) => b.toUpperCase() < a.toUpperCase() ? 1 : -1);\n}","import { onCategoryTagClick } from './category.js';\nimport { state } from './state.js';\n\n/**\n * A map function that gets applied over every iteration\n * @param {Array} data The news data to interate over and create HTML elements\n * @returns {Array} An array of HTMLElements\n */\nexport function createNewsCard (data) {\n    const news = create('div');\n    const newsText = createNewsText(data);\n\n    const hasImage = data.image !== 'None';\n    if (hasImage) {\n        const newsImage = createNewsImage(data);\n        news.appendChild(newsImage);\n        news.classList.add('has-image');\n    }\n\n    news.classList.add('news');\n    news.appendChild(newsText);\n    \n    // For a scroll-into-view animation\n    animateIntoView(news);\n    return news;\n}\n\nfunction createNewsImage ({ url, image, title }) {\n    const newsImage = create('figure');\n    const newsLink = createNewsLink({ url });\n    const newsPicture = create('img');\n\n    newsImage.classList.add('news-image');\n    newsPicture.setAttribute('src', image);\n    newsPicture.setAttribute('alt', title);\n    newsPicture.setAttribute('loading', 'lazy');\n    newsPicture.setAttribute('width', '1200');\n    newsPicture.setAttribute('height', '675');\n    \n    newsLink.appendChild(newsPicture);\n    newsImage.appendChild(newsLink);\n    return newsImage;\n}\n\nfunction createNewsLink ({ url, title = '' }) {\n    const newsLink = create('a');\n    newsLink.classList.add('news-link');\n    newsLink.setAttribute('href', url);\n    newsLink.setAttribute('target', '_blank');\n    newsLink.setAttribute('rel', 'noopener');\n    newsLink.innerHTML = title;\n    return newsLink;\n}\n\nfunction createNewsFooter({ author, url }) {\n    const newsFooter = create('div');\n    const newsLink = createNewsLink({ url });\n    const icon = createIconExternal();\n\n    if(removeURLs(author)) {\n        const newsAuthor = create('div');\n        const authors = cleanUpAuthors(author);\n        newsAuthor.innerHTML = `By ${ authors }`;\n        newsAuthor.classList.add('news-author');\n        newsFooter.appendChild(newsAuthor);\n    }\n\n    newsLink.innerHTML = `Full Story ${icon}`;\n    newsLink.classList.add('underline');\n    newsFooter.classList.add('news-footer');\n    newsFooter.appendChild(newsLink);\n    return newsFooter;\n}\n\nfunction createNewsText ({ \n    image, \n    author, \n    url, \n    title, \n    description,\n    category,\n    published\n}) {\n    const newsText = create('div');\n    const newsMeta = createNewsMeta(category, published);\n    const newsTitle = createNewsTitle({ title, url });\n    const newsDesc = create('p');\n    const newsFooter = createNewsFooter({ author, url });\n    const descText = removeHTMLTags(description);\n\n    // Add data & text\n    newsDesc.innerHTML = removeURLs(descText);\n\n    // Add classes\n    newsText.classList.toggle('no-desc', !descText);\n    newsText.classList.add('news-text');\n    newsDesc.classList.add('news-desc');\n\n    const hasImage = image !== 'None';\n    if (!hasImage) {\n        const newsHeadline = create('div');\n        const newsDetails = create('div');\n        \n        newsHeadline.classList.add('news-headline');\n        newsDetails.classList.add('news-details');\n\n        newsHeadline.appendChild(newsMeta);\n        newsHeadline.appendChild(newsTitle);\n        \n        newsDetails.appendChild(newsDesc);\n        newsDetails.appendChild(newsFooter);\n        \n        newsText.appendChild(newsHeadline);\n        newsText.appendChild(newsDetails);\n    } else {\n        // Append Elements\n        newsText.appendChild(newsMeta);\n        newsText.appendChild(newsTitle);\n        newsText.appendChild(newsDesc);\n        newsText.appendChild(newsFooter);\n    }\n    \n    return newsText;\n}\n\nfunction createNewsMeta (categoriesList, published) {\n    const newsMeta = create('div');\n    const newsCategory = create('div');\n    const separator = create('span');\n    const newsPubDate = create('div');\n    const date = new Date(published).toISOString();\n    const pubDate = timeAgo(date);\n\n    newsMeta.classList.add('news-meta');\n    newsCategory.classList.add('news-categories');\n    separator.classList.add('separator');\n    newsPubDate.classList.add('news-pubdate');\n\n    separator.innerText = '•';\n    newsPubDate.innerText = pubDate;    \n    \n    // Remove categories that are not in the dropdown\n    const filteredCat = categoriesList.filter((catText) => {\n        if (state.categories.includes(catText)) {\n            return catText;\n        }\n    })\n    // Limit to display only 2 categories\n    .filter((catText, idx) => idx <= 1 && catText);\n\n    // Create categories elemenes for each category and attach a click event listener\n    filteredCat.map((catText) => {\n        \n        const category = create('a');\n        category.innerText = `${catText}`;\n        category.setAttribute('data-category', catText);\n        category.setAttribute('href', '#');\n        category.classList.add('news-category', 'underline');\n        category.addEventListener('click', onCategoryTagClick);\n        return category;\n    })\n\n    // After creating category elements, append them to the newsCategory parent element\n    .forEach((category, idx) => {\n        newsCategory.appendChild(category);\n        const lastEl = filteredCat.length - 1 === idx;\n        if(!lastEl) {\n            newsCategory.innerHTML += `<span class=\"separator\">•</span>`;\n        }\n    });\n\n    newsMeta.appendChild(newsCategory);\n    newsMeta.appendChild(separator);\n    newsMeta.appendChild(newsPubDate);\n\n    return newsMeta;\n}\n\nfunction createNewsTitle ({ title, url }) {\n    const newsTitle = create('h2');\n    const newsLink = createNewsLink({ title, url });\n    newsLink.classList.add('underline');\n    newsTitle.classList.add('news-title');\n    newsTitle.appendChild(newsLink);\n    return newsTitle;\n}\n\nfunction createIconExternal() {\n    return `\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n            <line x1=\"14.5\" y1=\"1.5\" x2=\"1.5\" y2=\"14.5\"></line>\n            <polyline points=\"7.5,1.5 14.5,1.5 14.5,8.5 \"></polyline>\n        </svg>\n    `;\n}\n\n/**\n * Authors are in different formats. This is a way to clean up the authors by removing HTML and unnecessary entities.\n * Limits authors to first three.\n * @param {String} author\n * @return {String} \n */\nfunction cleanUpAuthors(author) {\n    \n    // \"temp\" parses any html entities that need to be removed\n    const temp = document.createElement('span');\n    temp.innerHTML = author;\n\n    const cleanedAuthor = removeHTMLTags(parseJSON(temp.innerText))\n    .split(',')\n    // Remove any false values\n    .filter(Boolean)\n    // Creates a break between author names\n    .map((a, idx, src) => `${ a }${ src.length > 1 && idx >= 0 && idx < src.length - 1 ? \",<br>\" : \"\" }`)\n    // Only keep the first three authors\n    .slice(0, 3)\n    .join('')\n    .trim();\n\n    temp.remove();\n    return cleanedAuthor;\n}\n\n/**\n * Removes HTML from the payload (which is not needed)\n * @param {String} html Any string containing HTML tags\n * @return {String} HTML tags removed from a string\n */\nfunction removeHTMLTags (html = '') {\n    return html.replace(/(<([^>]+)>)|(\\\\n)/gmi, '');\n}\n\n/**\n * Data is sometimes sending back JSON as the author\n * This check if the payload is JSON and checks and returns the name prop\n */\nfunction parseJSON (json = '') {\n    if(json.match(/(^\\[{)|(}\\]$)/g)) {\n        const j = JSON.parse(json)[0];\n        return !j ? '' : j.name;\n    } else {\n        return json\n    }\n}\n\n/**\n * Remove any URLs from the payload\n */\nfunction removeURLs(text = '') {\n    return text.replace(/@?https?:\\/\\/|(www.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)?/igm, '');\n}\n\n/**\n * @param {String} tag An HTML tag to create\n * @return {HTMLElement} An HTML Element\n */\nfunction create (tag) {\n    return document.createElement(tag);\n}\n\nconst timeTemplates = {\n    prefix: \"\",\n    suffix: \" ago\",\n    seconds: \"less than a minute\",\n    minute: \"a minute\",\n    minutes: \"%d minutes\",\n    hour: \"an hour\",\n    hours: \"%d hours\",\n    day: \"a day\",\n    days: \"%d days\",\n    month: \"about a month\",\n    months: \"%d months\",\n    year: \"about a year\",\n    years: \"%d years\"\n};\n\n/**\n * @param {String} t Time type\n * @param {Number} n Time elapsed\n * @return {String} Time passed in english\n */\nfunction timeTemplate (t, n) {\n    return timeTemplates[t] && timeTemplates[t].replace(/%d/i, Math.abs(Math.round(n)));\n};\n\n/**\n * @param {String} time ISO String time format\n * @return {String} The time pased since\n */\nfunction timeAgo (time) {\n    if(!time)\n        return;\n    time = time.replace(/\\.\\d+/, \"\"); // remove milliseconds\n    time = time.replace(/-/, \"/\").replace(/-/, \"/\");\n    time = time.replace(/T/, \" \").replace(/Z/, \" UTC\");\n    time = time.replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/, \" $1$2\"); // -04:00 -> -0400\n    time = new Date(time * 1000 || time);\n\n    const now = new Date();\n    const seconds = ((now.getTime() - time) * .001) >> 0;\n    const minutes = seconds / 60;\n    const hours = minutes / 60;\n    const days = hours / 24;\n    const years = days / 365;\n\n    return timeTemplates.prefix + (\n        seconds < 45 && timeTemplate('seconds', seconds) ||\n        seconds < 90 && timeTemplate('minute', 1) ||\n        minutes < 45 && timeTemplate('minutes', minutes) ||\n        minutes < 90 && timeTemplate('hour', 1) ||\n        hours < 24 && timeTemplate('hours', hours) ||\n        hours < 42 && timeTemplate('day', 1) ||\n        days < 30 && timeTemplate('days', days) ||\n        days < 45 && timeTemplate('month', 1) ||\n        days < 365 && timeTemplate('months', days / 30) ||\n        years < 1.5 && timeTemplate('year', 1) ||\n        timeTemplate('years', years)\n    ) + timeTemplates.suffix;\n};\n\n/**\n * Intersection Obsever to create an animation when scrolled into the screen\n * @param {HTMLElement} target\n */\nfunction animateIntoView(target) {\n    let options = {\n        rootMargin: '0px',\n        threshold: [0, 0.5, 1]\n    };\n    let callback = (entries) => {\n        entries.forEach((entry) => {\n            const ratio = entry.intersectionRatio;\n            const { top } = entry.boundingClientRect;\n            const shouldAppear = ratio > 0.5 && top >= 0;\n            const shouldHide = ratio === 0 && top >= 0;\n            if (shouldAppear) {\n                entry.target.classList.add('is-visible');\n            } else if (shouldHide) {\n                entry.target.classList.remove('is-visible');\n            }\n        });\n    };\n    let observer = new IntersectionObserver(callback, options);\n    observer.observe(target);\n}","import { updatePageUI } from './update.js';\nimport { fetchData } from './api.js';\n\nconst prev = document.getElementById('news-prev');\nconst next = document.getElementById('news-next');\nconst current = document.getElementById('news-current-page');\n\n/**\n * Updates the pagination with page number and url\n * @param {Object} data The response object\n * @param {String} url The URL that was fetched\n */\nexport function updatePagination(data, url) {\n\n    // Set current page\n    current.innerText = data.page;\n\n    // Attach the pagination data to the buttons, for previons and next\n    // Prev Button\n    const prevPage = data.page - 1;\n    if (prevPage > 0) {\n        prev.setAttribute('data-page', prevPage);\n        prev.removeAttribute('disabled');\n    } else {\n        prev.setAttribute('disabled', true);\n    }\n\n    // Next Button\n    const nextPage = data.page + 1;\n    next.setAttribute('data-page', nextPage);\n}\n\n/**\n * Fetches new data, next or previous page\n * @param {Object} event\n */\nasync function paginatePage(event) {\n    const { page } = event.target.dataset;\n    const response = await fetchData({  pageNumber: page });\n    \n    updatePageUI(response.data, response.url)\n}\n\nnext.addEventListener('click', paginatePage);\nprev.addEventListener('click', paginatePage);","import { createNewsCard } from './newsCard.js';\nimport { updatePagination } from './pagination.js';\nimport { fetchData } from './api.js';\n\nconst newsResults = document.getElementById('news-results');\nlet store = {};\n\n/**\n * Updates the page when new data has been received\n * @param {Object} data The response data\n * @param {String} url The URL that was fetched\n */\nexport function updatePageUI (data = { news: [] }, url = '' ) {\n    store = { data, url };\n    newsResults.style.opacity = 0;\n    newsResults.addEventListener('transitionend', onTransitionEnd);\n}\n\n/**\n * Callback the fade out animation\n * @param {Object} data The response data\n * @param {String} url The URL that was fetched\n */\nfunction appendData () {\n    \n    // If there are not search results\n    if (store.data.news.length === 0) {\n        return searchNotFound();\n    } else {\n        // Empty the parent \n        newsResults.innerHTML = '';\n    }\n\n    // Build the HTML for the news cards\n    store.data.news\n        .map((n) => createNewsCard(n))\n        .forEach(card => newsResults.appendChild(card));\n\n    //Pass the search info to the pagination buttons\n    updatePagination(store.data, store.url);\n\n    // Remove the style attribute to show the element again (removes opacity)\n    newsResults.removeAttribute('style');\n}\n\nfunction onTransitionEnd (event) {\n    if(event.propertyName === 'opacity') {\n        newsResults.removeEventListener('transitionend', onTransitionEnd);\n        window.scrollTo(0, 0);\n        appendData();\n    }\n};\n\nfunction searchNotFound() {\n    const goBack = document.createElement('a');\n    goBack.innerText = 'Go Back';\n    goBack.href = '#';\n    goBack.addEventListener('click', async (e) => {\n        e.preventDefault();\n        const { data, url } = await fetchData({ latestNews: true });\n        updatePageUI(data, url);\n    });\n    newsResults.innerHTML = '<h2 style=\"margin-bottom: 30px;\">Nothing found.</h2>';\n    newsResults.appendChild(goBack);\n    newsResults.style.cssText = 'text-align: center; padding: 30px; opacity: 1;';\n}","import { updatePageUI } from './update.js';\nimport { fetchData } from './api.js';\nimport { loadStoredFilter } from './filters.js';\n\nconst categoriesEl = document.getElementById('select-categories');\n\n/**\n * Change handler for category, also sends a new request for data and updates UI\n */\nexport function initCategoryChange () {\n    loadStoredFilter('category', categoriesEl);\n    categoriesEl.addEventListener('change', onChange);\n}\n\nasync function onChange (event) {\n    const { data, url } = await fetchData();\n    \n    // Update the page results\n    updatePageUI(data, url);\n\n    // Save to local storage\n    localStorage.setItem('category', event.target.value);\n}\n\n/**\n * The category tags that lay with the news cards\n * @param {Object} event\n */\nexport async function onCategoryTagClick (event) {\n    event.preventDefault();\n    const { category } = event.target.dataset;\n    const { data, url } = await fetchData();\n\n    // Update the category selector\n    categoriesEl.value = category;\n\n    // Update the page results\n    updatePageUI(data, url); \n    \n    // Save to local storage\n    localStorage.setItem('category', category);\n}","import { updatePageUI } from './update.js';\nimport { fetchData } from './api.js';\nimport { \n    closeAllFilters, \n    updateTrayText, \n    loadStoredFilter\n} from './filters.js';\n\nconst languageEl = document.getElementById('select-language');\n\n/**\n * Initialize the language change events\n */\nexport function initLanguageChange() {\n    languageEl.addEventListener('change', onChange);\n    loadStoredFilter('language', languageEl);\n}\n\nasync function onChange (event) {\n    const { data, url } = await fetchData();\n    const lang = event.target.value;\n\n    // Update the page results\n    updatePageUI(data, url);\n    updateTrayText({ language: event.target });\n    closeAllFilters();\n\n    // Save to local storage\n    localStorage.setItem('language', lang);\n\n    // Set the lang on the HTML element\n    if (lang !== 'any') {\n        document.documentElement.setAttribute('lang', lang);\n    }\n}","import { updatePageUI } from './update.js';\nimport { fetchData } from './api.js';\nimport {\n    closeAllFilters,\n    updateTrayText,\n    loadStoredFilter\n} from './filters.js';\n\nconst regionsEl = document.getElementById('select-region');\n\n/**\n * Initialize the change events for the region filters\n */\nexport function initRegionChange() {\n    regionsEl.addEventListener('change', onChange);\n    loadStoredFilter('region', regionsEl);\n}\n\n// Update the page when the region has changed\nasync function onChange (event) {\n    const { data, url } = await fetchData();\n\n    // Update the page results\n    updatePageUI(data, url);\n    updateTrayText({ region: event.target });\n    closeAllFilters();\n\n    // Save to local storage\n    localStorage.setItem('region', event.target.value);\n}","import { updatePageUI } from './update.js';\nimport { fetchData } from './api.js';\nimport { closeAllFilters } from './filters.js';\n\nconst startDate = document.getElementById('select-date-start');\nconst endDate = document.getElementById('select-date-end');\nconst apply = document.getElementById('filter-date-apply');\nlet start;\nlet end;\n\n/**\n * Initialize date change events\n */\nexport function initDateChange() {\n\n    // Add event listeners and pass in an string ID to know which date picker is being picked\n    startDate.addEventListener('change', onChange.bind(null, 'startDate'));\n    endDate.addEventListener('change', onChange.bind(null, 'endDate'));\n    \n    // This event applies a new search with a specified date range\n    apply.addEventListener('click', onApply);\n}\n\n// Update the start and end variables on user input\n// Function statements are hoisted to the top\nfunction onChange (type, event) {\n    if(type === 'startDate') {\n        start = event.target.value;\n    }\n    if(type === 'endDate') {\n        end = event.target.value;\n    }\n}\n\n// Seperate action to make sure there is a date range\nasync function onApply () {\n\n    // If start and end dates exist, create a new url\n    if(start && end) {\n        const { data, url } = await fetchData();\n\n        // Update the page results\n        updatePageUI(data, url);\n        closeAllFilters();\n    }\n}\n","import { fetchData } from './api.js';\nimport { updatePageUI } from './update.js';\n\n// Cache Elements\nconst newsTitle = document.querySelector('h1');\nconst keywords = document.getElementById('keywords');\nconst searchForm = document.getElementById('news-form');\nconst searchButton = document.getElementById('search-button');\n\n/**\n * Initialize the search and add search events\n */\nexport function initSearch () {\n    keywords.addEventListener('focus', onSearchFocus);\n    keywords.addEventListener('blur', onSearchBlur);\n    searchButton.addEventListener(\"click\", onSearchClick);\n    newsTitle.addEventListener('click', onTitleClick);\n\n    // Search on inital load\n    onSearchClick();\n}\n\n/**\n * Click hanlder that creates a new search URL, fetched the data, and updates the UI\n * @param {Object} event\n */\nasync function onSearchClick (event) {\n    if(event) event.preventDefault();\n    \n    const { data, url } = await fetchData();\n    updatePageUI(data, url);\n}\n\nfunction onSearchFocus() {\n    searchForm.classList.add('is-focused');\n}\n\nfunction onSearchBlur () {\n    searchForm.classList.remove('is-focused');\n}\n\nfunction onTitleClick() {\n    const half = window.scrollY / 2;\n    const diff = window.scrollY > half ? window.innerHeight : 0;\n    const percent = (window.scrollY + diff) / (document.body.clientHeight);\n    const timeout = 1000 * percent;\n    window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n    });\n    setTimeout(async () => {\n        const { data, url } = await fetchData({ latestNews: true });\n        updatePageUI(data, url);\n    }, timeout);\n}","const themeCheckbox = document.getElementById('select-theme');\nconst themeClassName = 'is-dark-mode';\n\n/**\n * Initialize the change events for the theme\n */\nexport function initTheme() {\n    themeCheckbox.addEventListener('change', onChange);\n    loadTheme();\n}\n\n/**\n * Event to handle theme change\n */\nfunction onChange (event) {\n    const { checked } = event.target;\n    toggleTheme(checked);\n    localStorage.setItem(themeClassName, checked);\n}\n\n/**\n * Toggle the theme, adds a class to the HTML root element\n * @param {Boolean} bool\n */\nfunction toggleTheme(bool) {\n    document.documentElement.classList.toggle(themeClassName, bool);\n}\n\n/**\n * Runs once the page has loaded, sets the theme, to dark or light\n */\nfunction loadTheme() {\n    const isDark = JSON.parse(localStorage.getItem(themeClassName));\n    toggleTheme(isDark);\n    themeCheckbox.checked = isDark;\n}","import { initFilters } from './filters.js';\r\nimport { initCategoryChange } from './category.js';\r\nimport { initLanguageChange } from './language.js';\r\nimport { initRegionChange } from './region.js';\r\nimport { initDateChange } from './date.js';\r\nimport { initSearch } from './search.js';\r\nimport { initTheme } from './theme.js';\r\n\r\n/**\r\n * Initializes modules\r\n */\r\nasync function startApp () {\r\n\r\n    // Initialize\r\n    await initFilters();\r\n    initCategoryChange();\r\n    initLanguageChange();\r\n    initRegionChange();\r\n    initDateChange();\r\n    initSearch();\r\n    initTheme();\r\n}\r\n\r\nstartApp();"]}