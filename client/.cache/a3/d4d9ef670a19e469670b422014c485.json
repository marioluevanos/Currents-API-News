{"id":"SYrZ","dependencies":[{"name":"/Users/marioluevanos/Web Development/Journalism-Died/client/.babelrc","includedInParent":true,"mtime":1602977442634},{"name":"/Users/marioluevanos/Web Development/Journalism-Died/client/package.json","includedInParent":true,"mtime":1602977663027},{"name":"./state.js","loc":{"line":1,"column":22},"parent":"/Users/marioluevanos/Web Development/Journalism-Died/client/src/scripts/api.js","resolved":"/Users/marioluevanos/Web Development/Journalism-Died/client/src/scripts/state.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.fetchData=c,exports.fetchFilterOptions=i,exports.buildUrl=d;var e=require(\"./state.js\");const t=document.documentElement,a=document.getElementById(\"news-results\"),n=document.getElementById(\"keywords\"),l=document.getElementById(\"select-language\"),s=document.getElementById(\"select-region\"),r=document.getElementById(\"select-categories\"),o=document.getElementById(\"select-date-start\"),u=document.getElementById(\"select-date-end\");async function c({latestNews:e,pageNumber:a}={}){let n=d({latestNews:e,pageNumber:a});t.classList.add(\"is-loading\");try{const e=await fetch(n);e.ok||m(e);const a=await e.json();return t.classList.remove(\"is-loading\"),{data:a,url:n}}catch(l){console.error(l)}}async function i(t=\"\"){if(window.localStorage){const e=localStorage.getItem(t);if(e)return JSON.parse(e)}const a=`${e.state.BASE_URL}/filters?name=${t}`;try{const e=await fetch(a),l=(await e.json())[t];return localStorage.setItem(t,JSON.stringify(l)),l}catch(n){console.error(n)}}function d({latestNews:t,pageNumber:a}={}){const c=\"\"!==n.value,i=\"any\"!==l.value,d=\"any\"!==s.value,m=\"any\"!==r.value,y=\"\"!==o.value,v=\"\"!==u.value,f=!(c||i||d||m||y||v),w=\"\"===n.value&&i&&!m;let $=`${e.state.BASE_URL}/search?`;return c&&($+=`keywords=${n.value}&`),i&&($+=`language=${l.value}&`),d&&($+=`country=${s.value}&`),m&&($+=`category=${r.value}&`),y&&($+=`start_date=${o.value}&`),v&&($+=`end_date=${u.value}&`),(t||w||f)&&($=`${e.state.BASE_URL}/latest?`,i&&($+=`language=${l.value}&`),t&&g()),a&&($+=`page_number=${a}&`),$.replace(/\\&$/g,\"\")}function g(){r.value=\"any\",n.value=\"\",s.value=\"any\",o.value=\"\",u.value=\"\"}function m(e){alert(JSON.stringify(e)),a.innerHTML='<br><h2 style=\"text-align: center\">Something went wrong with the server.</h2>'}"},"sourceMaps":{"js":{"mappings":[{"source":"scripts/api.js","original":{"line":156,"column":1},"generated":{"line":1,"column":0}},{"source":"scripts/api.js","original":{"line":156,"column":1},"generated":{"line":1,"column":13}},{"source":"scripts/api.js","original":{"line":156,"column":1},"generated":{"line":1,"column":20}},{"source":"scripts/api.js","original":{"line":156,"column":1},"generated":{"line":1,"column":35}},{"source":"scripts/api.js","original":{"line":156,"column":1},"generated":{"line":1,"column":43}},{"source":"scripts/api.js","original":{"line":156,"column":1},"generated":{"line":1,"column":56}},{"source":"scripts/api.js","original":{"line":156,"column":1},"generated":{"line":1,"column":57}},{"source":"scripts/api.js","original":{"line":156,"column":1},"generated":{"line":1,"column":64}},{"source":"scripts/api.js","original":{"line":156,"column":1},"generated":{"line":1,"column":68}},{"source":"scripts/api.js","original":{"line":156,"column":1},"generated":{"line":1,"column":76}},{"source":"scripts/api.js","original":{"line":156,"column":1},"generated":{"line":1,"column":86}},{"source":"scripts/api.js","original":{"line":156,"column":1},"generated":{"line":1,"column":88}},{"source":"scripts/api.js","original":{"line":156,"column":1},"generated":{"line":1,"column":96}},{"source":"scripts/api.js","original":{"line":156,"column":1},"generated":{"line":1,"column":115}},{"source":"scripts/api.js","original":{"line":156,"column":1},"generated":{"line":1,"column":117}},{"source":"scripts/api.js","original":{"line":156,"column":1},"generated":{"line":1,"column":125}},{"source":"scripts/api.js","original":{"line":156,"column":1},"generated":{"line":1,"column":134}},{"source":"scripts/api.js","original":{"line":1,"column":0},"generated":{"line":1,"column":136}},{"source":"scripts/api.js","original":{"line":1,"column":0},"generated":{"line":1,"column":140}},{"source":"scripts/api.js","original":{"line":1,"column":0},"generated":{"line":1,"column":142}},{"source":"scripts/api.js","original":{"line":1,"column":0},"generated":{"line":1,"column":150}},{"source":"scripts/api.js","original":{"line":3,"column":0},"generated":{"line":1,"column":164}},{"source":"scripts/api.js","name":"htmlEl","original":{"line":3,"column":6},"generated":{"line":1,"column":170}},{"source":"scripts/api.js","name":"document","original":{"line":3,"column":15},"generated":{"line":1,"column":172}},{"source":"scripts/api.js","name":"documentElement","original":{"line":3,"column":24},"generated":{"line":1,"column":181}},{"source":"scripts/api.js","name":"newsResults","original":{"line":4,"column":6},"generated":{"line":1,"column":197}},{"source":"scripts/api.js","name":"document","original":{"line":4,"column":20},"generated":{"line":1,"column":199}},{"source":"scripts/api.js","name":"getElementById","original":{"line":4,"column":29},"generated":{"line":1,"column":208}},{"source":"scripts/api.js","original":{"line":4,"column":44},"generated":{"line":1,"column":223}},{"source":"scripts/api.js","name":"keywordsEl","original":{"line":5,"column":6},"generated":{"line":1,"column":239}},{"source":"scripts/api.js","name":"document","original":{"line":5,"column":19},"generated":{"line":1,"column":241}},{"source":"scripts/api.js","name":"getElementById","original":{"line":5,"column":28},"generated":{"line":1,"column":250}},{"source":"scripts/api.js","original":{"line":5,"column":43},"generated":{"line":1,"column":265}},{"source":"scripts/api.js","name":"languageEl","original":{"line":6,"column":6},"generated":{"line":1,"column":277}},{"source":"scripts/api.js","name":"document","original":{"line":6,"column":19},"generated":{"line":1,"column":279}},{"source":"scripts/api.js","name":"getElementById","original":{"line":6,"column":28},"generated":{"line":1,"column":288}},{"source":"scripts/api.js","original":{"line":6,"column":43},"generated":{"line":1,"column":303}},{"source":"scripts/api.js","name":"regionEl","original":{"line":7,"column":6},"generated":{"line":1,"column":322}},{"source":"scripts/api.js","name":"document","original":{"line":7,"column":17},"generated":{"line":1,"column":324}},{"source":"scripts/api.js","name":"getElementById","original":{"line":7,"column":26},"generated":{"line":1,"column":333}},{"source":"scripts/api.js","original":{"line":7,"column":41},"generated":{"line":1,"column":348}},{"source":"scripts/api.js","name":"categoriesEl","original":{"line":8,"column":6},"generated":{"line":1,"column":365}},{"source":"scripts/api.js","name":"document","original":{"line":8,"column":21},"generated":{"line":1,"column":367}},{"source":"scripts/api.js","name":"getElementById","original":{"line":8,"column":30},"generated":{"line":1,"column":376}},{"source":"scripts/api.js","original":{"line":8,"column":45},"generated":{"line":1,"column":391}},{"source":"scripts/api.js","name":"startDateEl","original":{"line":9,"column":6},"generated":{"line":1,"column":412}},{"source":"scripts/api.js","name":"document","original":{"line":9,"column":20},"generated":{"line":1,"column":414}},{"source":"scripts/api.js","name":"getElementById","original":{"line":9,"column":29},"generated":{"line":1,"column":423}},{"source":"scripts/api.js","original":{"line":9,"column":44},"generated":{"line":1,"column":438}},{"source":"scripts/api.js","name":"endDateEl","original":{"line":10,"column":6},"generated":{"line":1,"column":459}},{"source":"scripts/api.js","name":"document","original":{"line":10,"column":18},"generated":{"line":1,"column":461}},{"source":"scripts/api.js","name":"getElementById","original":{"line":10,"column":27},"generated":{"line":1,"column":470}},{"source":"scripts/api.js","original":{"line":10,"column":42},"generated":{"line":1,"column":485}},{"source":"scripts/api.js","original":{"line":16,"column":7},"generated":{"line":1,"column":504}},{"source":"scripts/api.js","name":"fetchData","original":{"line":16,"column":22},"generated":{"line":1,"column":519}},{"source":"scripts/api.js","original":{"line":16,"column":33},"generated":{"line":1,"column":522}},{"source":"scripts/api.js","name":"latestNews","original":{"line":16,"column":35},"generated":{"line":1,"column":533}},{"source":"scripts/api.js","original":{"line":16,"column":33},"generated":{"line":1,"column":535}},{"source":"scripts/api.js","name":"pageNumber","original":{"line":16,"column":47},"generated":{"line":1,"column":546}},{"source":"scripts/api.js","original":{"line":16,"column":62},"generated":{"line":1,"column":549}},{"source":"scripts/api.js","name":"url","original":{"line":18,"column":8},"generated":{"line":1,"column":553}},{"source":"scripts/api.js","name":"url","original":{"line":18,"column":8},"generated":{"line":1,"column":557}},{"source":"scripts/api.js","name":"buildUrl","original":{"line":18,"column":14},"generated":{"line":1,"column":559}},{"source":"scripts/api.js","original":{"line":18,"column":23},"generated":{"line":1,"column":561}},{"source":"scripts/api.js","name":"latestNews","original":{"line":18,"column":25},"generated":{"line":1,"column":562}},{"source":"scripts/api.js","name":"latestNews","original":{"line":18,"column":25},"generated":{"line":1,"column":573}},{"source":"scripts/api.js","name":"pageNumber","original":{"line":18,"column":37},"generated":{"line":1,"column":575}},{"source":"scripts/api.js","name":"pageNumber","original":{"line":18,"column":37},"generated":{"line":1,"column":586}},{"source":"scripts/api.js","name":"htmlEl","original":{"line":21,"column":4},"generated":{"line":1,"column":590}},{"source":"scripts/api.js","name":"classList","original":{"line":21,"column":11},"generated":{"line":1,"column":592}},{"source":"scripts/api.js","name":"add","original":{"line":21,"column":21},"generated":{"line":1,"column":602}},{"source":"scripts/api.js","original":{"line":21,"column":25},"generated":{"line":1,"column":606}},{"source":"scripts/api.js","original":{"line":37,"column":8},"generated":{"line":1,"column":620}},{"source":"scripts/api.js","name":"response","original":{"line":38,"column":14},"generated":{"line":1,"column":624}},{"source":"scripts/api.js","name":"response","original":{"line":38,"column":14},"generated":{"line":1,"column":630}},{"source":"scripts/api.js","name":"fetch","original":{"line":38,"column":31},"generated":{"line":1,"column":638}},{"source":"scripts/api.js","name":"url","original":{"line":38,"column":37},"generated":{"line":1,"column":644}},{"source":"scripts/api.js","name":"response","original":{"line":40,"column":12},"generated":{"line":1,"column":647}},{"source":"scripts/api.js","name":"ok","original":{"line":40,"column":21},"generated":{"line":1,"column":649}},{"source":"scripts/api.js","name":"postErrorMessage","original":{"line":40,"column":25},"generated":{"line":1,"column":653}},{"source":"scripts/api.js","name":"response","original":{"line":40,"column":42},"generated":{"line":1,"column":655}},{"source":"scripts/api.js","name":"data","original":{"line":42,"column":14},"generated":{"line":1,"column":658}},{"source":"scripts/api.js","name":"data","original":{"line":42,"column":14},"generated":{"line":1,"column":664}},{"source":"scripts/api.js","name":"response","original":{"line":42,"column":27},"generated":{"line":1,"column":672}},{"source":"scripts/api.js","name":"json","original":{"line":42,"column":36},"generated":{"line":1,"column":674}},{"source":"scripts/api.js","original":{"line":49,"column":15},"generated":{"line":1,"column":681}},{"source":"scripts/api.js","name":"htmlEl","original":{"line":47,"column":8},"generated":{"line":1,"column":688}},{"source":"scripts/api.js","name":"classList","original":{"line":47,"column":15},"generated":{"line":1,"column":690}},{"source":"scripts/api.js","name":"remove","original":{"line":47,"column":25},"generated":{"line":1,"column":700}},{"source":"scripts/api.js","original":{"line":47,"column":32},"generated":{"line":1,"column":707}},{"source":"scripts/api.js","original":{"line":49,"column":15},"generated":{"line":1,"column":721}},{"source":"scripts/api.js","name":"data","original":{"line":49,"column":17},"generated":{"line":1,"column":722}},{"source":"scripts/api.js","name":"data","original":{"line":49,"column":17},"generated":{"line":1,"column":727}},{"source":"scripts/api.js","name":"url","original":{"line":49,"column":23},"generated":{"line":1,"column":729}},{"source":"scripts/api.js","name":"url","original":{"line":49,"column":23},"generated":{"line":1,"column":733}},{"source":"scripts/api.js","original":{"line":51,"column":6},"generated":{"line":1,"column":736}},{"source":"scripts/api.js","name":"error","original":{"line":51,"column":12},"generated":{"line":1,"column":742}},{"source":"scripts/api.js","name":"console","original":{"line":52,"column":8},"generated":{"line":1,"column":745}},{"source":"scripts/api.js","name":"error","original":{"line":52,"column":16},"generated":{"line":1,"column":753}},{"source":"scripts/api.js","name":"error","original":{"line":52,"column":22},"generated":{"line":1,"column":759}},{"source":"scripts/api.js","original":{"line":61,"column":7},"generated":{"line":1,"column":763}},{"source":"scripts/api.js","name":"fetchFilterOptions","original":{"line":61,"column":22},"generated":{"line":1,"column":778}},{"source":"scripts/api.js","name":"name","original":{"line":61,"column":42},"generated":{"line":1,"column":780}},{"source":"scripts/api.js","original":{"line":61,"column":49},"generated":{"line":1,"column":782}},{"source":"scripts/api.js","name":"window","original":{"line":64,"column":8},"generated":{"line":1,"column":786}},{"source":"scripts/api.js","name":"window","original":{"line":64,"column":8},"generated":{"line":1,"column":789}},{"source":"scripts/api.js","name":"localStorage","original":{"line":64,"column":15},"generated":{"line":1,"column":796}},{"source":"scripts/api.js","original":{"line":64,"column":29},"generated":{"line":1,"column":809}},{"source":"scripts/api.js","name":"storedData","original":{"line":65,"column":14},"generated":{"line":1,"column":810}},{"source":"scripts/api.js","name":"storedData","original":{"line":65,"column":14},"generated":{"line":1,"column":816}},{"source":"scripts/api.js","name":"localStorage","original":{"line":65,"column":27},"generated":{"line":1,"column":818}},{"source":"scripts/api.js","name":"getItem","original":{"line":65,"column":40},"generated":{"line":1,"column":831}},{"source":"scripts/api.js","name":"name","original":{"line":65,"column":48},"generated":{"line":1,"column":839}},{"source":"scripts/api.js","name":"storedData","original":{"line":66,"column":11},"generated":{"line":1,"column":842}},{"source":"scripts/api.js","name":"storedData","original":{"line":66,"column":11},"generated":{"line":1,"column":845}},{"source":"scripts/api.js","name":"JSON","original":{"line":67,"column":19},"generated":{"line":1,"column":847}},{"source":"scripts/api.js","name":"JSON","original":{"line":67,"column":19},"generated":{"line":1,"column":854}},{"source":"scripts/api.js","name":"parse","original":{"line":67,"column":24},"generated":{"line":1,"column":859}},{"source":"scripts/api.js","name":"storedData","original":{"line":67,"column":30},"generated":{"line":1,"column":865}},{"source":"scripts/api.js","name":"url","original":{"line":71,"column":10},"generated":{"line":1,"column":868}},{"source":"scripts/api.js","name":"url","original":{"line":71,"column":10},"generated":{"line":1,"column":874}},{"source":"scripts/api.js","name":"state","original":{"line":71,"column":20},"generated":{"line":1,"column":879}},{"source":"scripts/api.js","name":"BASE_URL","original":{"line":71,"column":26},"generated":{"line":1,"column":881}},{"source":"scripts/api.js","name":"BASE_URL","original":{"line":71,"column":26},"generated":{"line":1,"column":887}},{"source":"scripts/api.js","name":"name","original":{"line":71,"column":53},"generated":{"line":1,"column":912}},{"source":"scripts/api.js","original":{"line":72,"column":8},"generated":{"line":1,"column":916}},{"source":"scripts/api.js","name":"response","original":{"line":73,"column":14},"generated":{"line":1,"column":920}},{"source":"scripts/api.js","name":"response","original":{"line":73,"column":14},"generated":{"line":1,"column":926}},{"source":"scripts/api.js","name":"fetch","original":{"line":73,"column":31},"generated":{"line":1,"column":934}},{"source":"scripts/api.js","name":"url","original":{"line":73,"column":37},"generated":{"line":1,"column":940}},{"source":"scripts/api.js","name":"dropDownType","original":{"line":75,"column":14},"generated":{"line":1,"column":943}},{"source":"scripts/api.js","name":"response","original":{"line":74,"column":27},"generated":{"line":1,"column":952}},{"source":"scripts/api.js","name":"json","original":{"line":74,"column":36},"generated":{"line":1,"column":954}},{"source":"scripts/api.js","name":"name","original":{"line":75,"column":34},"generated":{"line":1,"column":962}},{"source":"scripts/api.js","name":"dropDownType","original":{"line":77,"column":15},"generated":{"line":1,"column":965}},{"source":"scripts/api.js","name":"localStorage","original":{"line":76,"column":8},"generated":{"line":1,"column":972}},{"source":"scripts/api.js","name":"setItem","original":{"line":76,"column":21},"generated":{"line":1,"column":985}},{"source":"scripts/api.js","name":"name","original":{"line":76,"column":29},"generated":{"line":1,"column":993}},{"source":"scripts/api.js","name":"JSON","original":{"line":76,"column":35},"generated":{"line":1,"column":995}},{"source":"scripts/api.js","name":"stringify","original":{"line":76,"column":40},"generated":{"line":1,"column":1000}},{"source":"scripts/api.js","name":"dropDownType","original":{"line":76,"column":50},"generated":{"line":1,"column":1010}},{"source":"scripts/api.js","name":"dropDownType","original":{"line":77,"column":15},"generated":{"line":1,"column":1014}},{"source":"scripts/api.js","original":{"line":78,"column":6},"generated":{"line":1,"column":1016}},{"source":"scripts/api.js","name":"error","original":{"line":78,"column":12},"generated":{"line":1,"column":1022}},{"source":"scripts/api.js","name":"console","original":{"line":79,"column":8},"generated":{"line":1,"column":1025}},{"source":"scripts/api.js","name":"error","original":{"line":79,"column":16},"generated":{"line":1,"column":1033}},{"source":"scripts/api.js","name":"error","original":{"line":79,"column":22},"generated":{"line":1,"column":1039}},{"source":"scripts/api.js","original":{"line":88,"column":7},"generated":{"line":1,"column":1043}},{"source":"scripts/api.js","name":"buildUrl","original":{"line":88,"column":16},"generated":{"line":1,"column":1052}},{"source":"scripts/api.js","original":{"line":88,"column":26},"generated":{"line":1,"column":1055}},{"source":"scripts/api.js","name":"latestNews","original":{"line":88,"column":28},"generated":{"line":1,"column":1066}},{"source":"scripts/api.js","original":{"line":88,"column":26},"generated":{"line":1,"column":1068}},{"source":"scripts/api.js","name":"pageNumber","original":{"line":88,"column":40},"generated":{"line":1,"column":1079}},{"source":"scripts/api.js","original":{"line":88,"column":55},"generated":{"line":1,"column":1082}},{"source":"scripts/api.js","name":"isKeyword","original":{"line":91,"column":10},"generated":{"line":1,"column":1086}},{"source":"scripts/api.js","name":"isKeyword","original":{"line":91,"column":10},"generated":{"line":1,"column":1092}},{"source":"scripts/api.js","original":{"line":91,"column":43},"generated":{"line":1,"column":1094}},{"source":"scripts/api.js","name":"keywordsEl","original":{"line":91,"column":22},"generated":{"line":1,"column":1099}},{"source":"scripts/api.js","name":"value","original":{"line":91,"column":33},"generated":{"line":1,"column":1101}},{"source":"scripts/api.js","name":"isLanguage","original":{"line":92,"column":10},"generated":{"line":1,"column":1107}},{"source":"scripts/api.js","original":{"line":92,"column":44},"generated":{"line":1,"column":1109}},{"source":"scripts/api.js","name":"languageEl","original":{"line":92,"column":23},"generated":{"line":1,"column":1117}},{"source":"scripts/api.js","name":"value","original":{"line":92,"column":34},"generated":{"line":1,"column":1119}},{"source":"scripts/api.js","name":"isRegion","original":{"line":93,"column":10},"generated":{"line":1,"column":1125}},{"source":"scripts/api.js","original":{"line":93,"column":40},"generated":{"line":1,"column":1127}},{"source":"scripts/api.js","name":"regionEl","original":{"line":93,"column":21},"generated":{"line":1,"column":1135}},{"source":"scripts/api.js","name":"value","original":{"line":93,"column":30},"generated":{"line":1,"column":1137}},{"source":"scripts/api.js","name":"isCategory","original":{"line":94,"column":10},"generated":{"line":1,"column":1143}},{"source":"scripts/api.js","original":{"line":94,"column":46},"generated":{"line":1,"column":1145}},{"source":"scripts/api.js","name":"categoriesEl","original":{"line":94,"column":23},"generated":{"line":1,"column":1153}},{"source":"scripts/api.js","name":"value","original":{"line":94,"column":36},"generated":{"line":1,"column":1155}},{"source":"scripts/api.js","name":"isStartDate","original":{"line":95,"column":10},"generated":{"line":1,"column":1161}},{"source":"scripts/api.js","original":{"line":95,"column":46},"generated":{"line":1,"column":1163}},{"source":"scripts/api.js","name":"startDateEl","original":{"line":95,"column":24},"generated":{"line":1,"column":1168}},{"source":"scripts/api.js","name":"value","original":{"line":95,"column":36},"generated":{"line":1,"column":1170}},{"source":"scripts/api.js","name":"isEndDate","original":{"line":96,"column":10},"generated":{"line":1,"column":1176}},{"source":"scripts/api.js","original":{"line":96,"column":42},"generated":{"line":1,"column":1178}},{"source":"scripts/api.js","name":"endDateEl","original":{"line":96,"column":22},"generated":{"line":1,"column":1183}},{"source":"scripts/api.js","name":"value","original":{"line":96,"column":32},"generated":{"line":1,"column":1185}},{"source":"scripts/api.js","name":"isAllBlank","original":{"line":97,"column":10},"generated":{"line":1,"column":1191}},{"source":"scripts/api.js","name":"isKeyword","original":{"line":97,"column":24},"generated":{"line":1,"column":1195}},{"source":"scripts/api.js","name":"isLanguage","original":{"line":97,"column":38},"generated":{"line":1,"column":1198}},{"source":"scripts/api.js","name":"isRegion","original":{"line":97,"column":53},"generated":{"line":1,"column":1201}},{"source":"scripts/api.js","name":"isCategory","original":{"line":97,"column":66},"generated":{"line":1,"column":1204}},{"source":"scripts/api.js","name":"isStartDate","original":{"line":97,"column":81},"generated":{"line":1,"column":1207}},{"source":"scripts/api.js","name":"isEndDate","original":{"line":97,"column":97},"generated":{"line":1,"column":1210}},{"source":"scripts/api.js","name":"isDefault","original":{"line":98,"column":10},"generated":{"line":1,"column":1213}},{"source":"scripts/api.js","original":{"line":98,"column":43},"generated":{"line":1,"column":1215}},{"source":"scripts/api.js","name":"keywordsEl","original":{"line":98,"column":22},"generated":{"line":1,"column":1220}},{"source":"scripts/api.js","name":"value","original":{"line":98,"column":33},"generated":{"line":1,"column":1222}},{"source":"scripts/api.js","name":"isLanguage","original":{"line":98,"column":49},"generated":{"line":1,"column":1229}},{"source":"scripts/api.js","name":"isCategory","original":{"line":98,"column":64},"generated":{"line":1,"column":1233}},{"source":"scripts/api.js","name":"searchUrl","original":{"line":101,"column":8},"generated":{"line":1,"column":1235}},{"source":"scripts/api.js","name":"searchUrl","original":{"line":101,"column":8},"generated":{"line":1,"column":1239}},{"source":"scripts/api.js","name":"state","original":{"line":101,"column":24},"generated":{"line":1,"column":1244}},{"source":"scripts/api.js","name":"BASE_URL","original":{"line":101,"column":30},"generated":{"line":1,"column":1246}},{"source":"scripts/api.js","name":"BASE_URL","original":{"line":101,"column":30},"generated":{"line":1,"column":1252}},{"source":"scripts/api.js","name":"searchUrl","original":{"line":139,"column":11},"generated":{"line":1,"column":1271}},{"source":"scripts/api.js","name":"isKeyword","original":{"line":103,"column":7},"generated":{"line":1,"column":1278}},{"source":"scripts/api.js","name":"searchUrl","original":{"line":104,"column":8},"generated":{"line":1,"column":1282}},{"source":"scripts/api.js","name":"keywordsEl","original":{"line":104,"column":34},"generated":{"line":1,"column":1297}},{"source":"scripts/api.js","name":"value","original":{"line":104,"column":45},"generated":{"line":1,"column":1299}},{"source":"scripts/api.js","name":"isLanguage","original":{"line":106,"column":7},"generated":{"line":1,"column":1309}},{"source":"scripts/api.js","name":"searchUrl","original":{"line":107,"column":8},"generated":{"line":1,"column":1313}},{"source":"scripts/api.js","name":"languageEl","original":{"line":107,"column":34},"generated":{"line":1,"column":1328}},{"source":"scripts/api.js","name":"value","original":{"line":107,"column":45},"generated":{"line":1,"column":1330}},{"source":"scripts/api.js","name":"isRegion","original":{"line":109,"column":7},"generated":{"line":1,"column":1340}},{"source":"scripts/api.js","name":"searchUrl","original":{"line":110,"column":8},"generated":{"line":1,"column":1344}},{"source":"scripts/api.js","name":"regionEl","original":{"line":110,"column":33},"generated":{"line":1,"column":1358}},{"source":"scripts/api.js","name":"value","original":{"line":110,"column":42},"generated":{"line":1,"column":1360}},{"source":"scripts/api.js","name":"isCategory","original":{"line":112,"column":7},"generated":{"line":1,"column":1370}},{"source":"scripts/api.js","name":"searchUrl","original":{"line":113,"column":8},"generated":{"line":1,"column":1374}},{"source":"scripts/api.js","name":"categoriesEl","original":{"line":113,"column":34},"generated":{"line":1,"column":1389}},{"source":"scripts/api.js","name":"value","original":{"line":113,"column":47},"generated":{"line":1,"column":1391}},{"source":"scripts/api.js","name":"isStartDate","original":{"line":115,"column":7},"generated":{"line":1,"column":1401}},{"source":"scripts/api.js","name":"searchUrl","original":{"line":116,"column":8},"generated":{"line":1,"column":1405}},{"source":"scripts/api.js","name":"startDateEl","original":{"line":116,"column":36},"generated":{"line":1,"column":1422}},{"source":"scripts/api.js","name":"value","original":{"line":116,"column":48},"generated":{"line":1,"column":1424}},{"source":"scripts/api.js","name":"isEndDate","original":{"line":118,"column":7},"generated":{"line":1,"column":1434}},{"source":"scripts/api.js","name":"searchUrl","original":{"line":119,"column":8},"generated":{"line":1,"column":1438}},{"source":"scripts/api.js","name":"endDateEl","original":{"line":119,"column":34},"generated":{"line":1,"column":1453}},{"source":"scripts/api.js","name":"value","original":{"line":119,"column":44},"generated":{"line":1,"column":1455}},{"source":"scripts/api.js","name":"latestNews","original":{"line":121,"column":7},"generated":{"line":1,"column":1466}},{"source":"scripts/api.js","name":"isDefault","original":{"line":121,"column":21},"generated":{"line":1,"column":1469}},{"source":"scripts/api.js","name":"isAllBlank","original":{"line":121,"column":34},"generated":{"line":1,"column":1472}},{"source":"scripts/api.js","name":"searchUrl","original":{"line":124,"column":8},"generated":{"line":1,"column":1477}},{"source":"scripts/api.js","name":"state","original":{"line":124,"column":24},"generated":{"line":1,"column":1482}},{"source":"scripts/api.js","name":"BASE_URL","original":{"line":124,"column":30},"generated":{"line":1,"column":1484}},{"source":"scripts/api.js","name":"BASE_URL","original":{"line":124,"column":30},"generated":{"line":1,"column":1490}},{"source":"scripts/api.js","name":"isLanguage","original":{"line":126,"column":11},"generated":{"line":1,"column":1509}},{"source":"scripts/api.js","name":"searchUrl","original":{"line":127,"column":12},"generated":{"line":1,"column":1513}},{"source":"scripts/api.js","name":"languageEl","original":{"line":127,"column":38},"generated":{"line":1,"column":1528}},{"source":"scripts/api.js","name":"value","original":{"line":127,"column":49},"generated":{"line":1,"column":1530}},{"source":"scripts/api.js","name":"latestNews","original":{"line":131,"column":12},"generated":{"line":1,"column":1540}},{"source":"scripts/api.js","name":"resetSearchValues","original":{"line":132,"column":12},"generated":{"line":1,"column":1543}},{"source":"scripts/api.js","name":"pageNumber","original":{"line":135,"column":8},"generated":{"line":1,"column":1548}},{"source":"scripts/api.js","name":"searchUrl","original":{"line":136,"column":8},"generated":{"line":1,"column":1552}},{"source":"scripts/api.js","name":"pageNumber","original":{"line":136,"column":37},"generated":{"line":1,"column":1570}},{"source":"scripts/api.js","name":"searchUrl","original":{"line":139,"column":11},"generated":{"line":1,"column":1576}},{"source":"scripts/api.js","name":"replace","original":{"line":139,"column":21},"generated":{"line":1,"column":1578}},{"source":"scripts/api.js","original":{"line":139,"column":29},"generated":{"line":1,"column":1586}},{"source":"scripts/api.js","original":{"line":139,"column":37},"generated":{"line":1,"column":1593}},{"source":"scripts/api.js","original":{"line":145,"column":0},"generated":{"line":1,"column":1597}},{"source":"scripts/api.js","name":"resetSearchValues","original":{"line":145,"column":9},"generated":{"line":1,"column":1606}},{"source":"scripts/api.js","name":"categoriesEl","original":{"line":146,"column":4},"generated":{"line":1,"column":1610}},{"source":"scripts/api.js","name":"value","original":{"line":146,"column":17},"generated":{"line":1,"column":1612}},{"source":"scripts/api.js","original":{"line":146,"column":25},"generated":{"line":1,"column":1618}},{"source":"scripts/api.js","name":"keywordsEl","original":{"line":147,"column":4},"generated":{"line":1,"column":1624}},{"source":"scripts/api.js","name":"value","original":{"line":147,"column":15},"generated":{"line":1,"column":1626}},{"source":"scripts/api.js","original":{"line":147,"column":23},"generated":{"line":1,"column":1632}},{"source":"scripts/api.js","name":"regionEl","original":{"line":148,"column":4},"generated":{"line":1,"column":1635}},{"source":"scripts/api.js","name":"value","original":{"line":148,"column":13},"generated":{"line":1,"column":1637}},{"source":"scripts/api.js","original":{"line":148,"column":21},"generated":{"line":1,"column":1643}},{"source":"scripts/api.js","name":"startDateEl","original":{"line":149,"column":4},"generated":{"line":1,"column":1649}},{"source":"scripts/api.js","name":"value","original":{"line":149,"column":16},"generated":{"line":1,"column":1651}},{"source":"scripts/api.js","original":{"line":149,"column":24},"generated":{"line":1,"column":1657}},{"source":"scripts/api.js","name":"endDateEl","original":{"line":150,"column":4},"generated":{"line":1,"column":1660}},{"source":"scripts/api.js","name":"value","original":{"line":150,"column":14},"generated":{"line":1,"column":1662}},{"source":"scripts/api.js","original":{"line":150,"column":22},"generated":{"line":1,"column":1668}},{"source":"scripts/api.js","original":{"line":153,"column":0},"generated":{"line":1,"column":1671}},{"source":"scripts/api.js","name":"postErrorMessage","original":{"line":153,"column":9},"generated":{"line":1,"column":1680}},{"source":"scripts/api.js","name":"response","original":{"line":153,"column":26},"generated":{"line":1,"column":1682}},{"source":"scripts/api.js","name":"alert","original":{"line":154,"column":4},"generated":{"line":1,"column":1685}},{"source":"scripts/api.js","name":"JSON","original":{"line":154,"column":10},"generated":{"line":1,"column":1691}},{"source":"scripts/api.js","name":"stringify","original":{"line":154,"column":15},"generated":{"line":1,"column":1696}},{"source":"scripts/api.js","name":"response","original":{"line":154,"column":25},"generated":{"line":1,"column":1706}},{"source":"scripts/api.js","name":"newsResults","original":{"line":155,"column":4},"generated":{"line":1,"column":1710}},{"source":"scripts/api.js","name":"innerHTML","original":{"line":155,"column":16},"generated":{"line":1,"column":1712}},{"source":"scripts/api.js","original":{"line":155,"column":28},"generated":{"line":1,"column":1722}}],"sources":{"scripts/api.js":"import { state } from './state.js';\n\nconst htmlEl = document.documentElement;\nconst newsResults = document.getElementById('news-results');\nconst keywordsEl = document.getElementById('keywords');\nconst languageEl = document.getElementById('select-language');\nconst regionEl = document.getElementById('select-region');\nconst categoriesEl = document.getElementById('select-categories');\nconst startDateEl = document.getElementById('select-date-start');\nconst endDateEl = document.getElementById('select-date-end');\n\n/**\n * @param {Boolean} latestNews If true, fetch the latest news.\n * @return {Object} The data and the url searched\n */\nexport async function fetchData ({ latestNews, pageNumber } = {}) {\n\n    let url = buildUrl({ latestNews, pageNumber });\n\n    // Add loading class\n    htmlEl.classList.add('is-loading');\n\n    // if(state.IS_DEV) {\n    //     const storedData = localStorage.getItem(url);\n    //     if(storedData) {\n            \n    //         // Remove the loading screen\n    //         htmlEl.classList.remove('is-loading');\n\n    //         return {\n    //             data: JSON.parse(storedData),\n    //             url\n    //         };\n    //     }\n    // }\n\n    try {\n        const response = await fetch(url);\n        \n        if(!response.ok) postErrorMessage(response);\n        \n        const data = await response.json();\n        \n        // if(state.IS_DEV) localStorage.setItem(url, JSON.stringify(data));\n        \n        // Remove the loading class\n        htmlEl.classList.remove('is-loading');\n\n        return { data, url };\n\n    } catch(error) {\n        console.error(error);\n    }\n}\n\n/**\n * A generalized fetch function to get DropDown menu data\n * @param {String} name The name of the drop down to fetch\n * @returns {Array | Object} The dropdown values\n */\nexport async function fetchFilterOptions (name = '') {\n\n    // In case third party cookies or whatever is denied by the user\n    if (window.localStorage) {\n        const storedData = localStorage.getItem(name);\n        if(storedData) {\n            return JSON.parse(storedData);\n        }\n    }\n\n    const url = `${ state.BASE_URL }/filters?name=${ name }`;\n    try {\n        const response = await fetch(url);\n        const data = await response.json();\n        const dropDownType = data[name];\n        localStorage.setItem(name, JSON.stringify(dropDownType));\n        return dropDownType;\n    } catch(error) {\n        console.error(error);\n    }\n}\n\n/**\n * @param {Boolean} latestNews Explicitly get latest news\n * @param {String} pageNumber Add a page-number to the url\n * @return {String} The url to fetch\n */\nexport function buildUrl ({ latestNews, pageNumber } = {}) {\n\n    // Check if the inputs have any user value\n    const isKeyword = keywordsEl.value !== '';\n    const isLanguage = languageEl.value !== 'any';\n    const isRegion = regionEl.value !== 'any';\n    const isCategory = categoriesEl.value !== 'any';\n    const isStartDate = startDateEl.value !== '';\n    const isEndDate = endDateEl.value !== '';\n    const isAllBlank = !isKeyword && !isLanguage && !isRegion && !isCategory && !isStartDate && !isEndDate;\n    const isDefault = keywordsEl.value === '' && isLanguage && !isCategory;\n\n    // Contruct the base url\n    let searchUrl = `${ state.BASE_URL }/search?`;\n\n    if(isKeyword) {\n        searchUrl += `keywords=${ keywordsEl.value }&`;\n    }\n    if(isLanguage) {\n        searchUrl += `language=${ languageEl.value }&`;\n    }\n    if(isRegion) {\n        searchUrl += `country=${ regionEl.value }&`;\n    }\n    if(isCategory) {\n        searchUrl += `category=${ categoriesEl.value }&`;\n    }\n    if(isStartDate) {\n        searchUrl += `start_date=${ startDateEl.value }&`;\n    }\n    if(isEndDate) {\n        searchUrl += `end_date=${ endDateEl.value }&`;\n    }\n    if(latestNews || isDefault || isAllBlank) {\n        \n        // If they are all blank, use default search string\n        searchUrl = `${ state.BASE_URL }/latest?`;\n\n        if(isLanguage) {\n            searchUrl += `language=${ languageEl.value }&`;\n        }\n\n        // Reset to latest news\n        if (latestNews) {\n            resetSearchValues();\n        }\n    }\n    if (pageNumber) {\n        searchUrl += `page_number=${ pageNumber }&`\n    }\n\n    return searchUrl.replace(/\\&$/g, '');\n}\n\n/**\n * Resets everything except the language filter, since language is an accepted param in latest-news\n */\nfunction resetSearchValues() {\n    categoriesEl.value = 'any';\n    keywordsEl.value = '';\n    regionEl.value = 'any';\n    startDateEl.value = '';\n    endDateEl.value = '';\n}\n\nfunction postErrorMessage(response) {\n    alert(JSON.stringify(response))\n    newsResults.innerHTML = '<br><h2 style=\"text-align: center\">Something went wrong with the server.</h2>'\n}"},"lineCount":null}},"error":null,"hash":"4f2a752b691f80464122e287ed6e4436","cacheData":{"env":{}}}